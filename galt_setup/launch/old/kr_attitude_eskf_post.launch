<!--
  Name: kr_attitude_eskf_post.launch
  Triggers:
    * kr_attitude_eskf

  Brief: Launches the attitude ESKF (post processed version).
  Note: Magnetometer calibration must already be saved to rosparam.

  Topics you should use:
    * /attitude_eskf_post/adjusted_field
    * /attitude_eskf_post/bias
    * /attitude_eskf_post/filtered_imu
    * /attitude_eskf_post/status

  For visualization, direct RViz to use pose:
    * /attitude_eskf_post/pose
-->
<launch>
  <node pkg="kr_attitude_eskf" name="attitude_eskf_post" type="kr_attitude_eskf" output="screen">

    <!-- Magnetometer calibration needs to be in rosparam already -->
    <param name="enable_magnetometer" type="bool" value="true"/>
    <param name="calibrate_magnetometer" type="string" value="none"/>

    <!-- Enable pose for rviz debugging -->
    <param name="broadcast_frame" type="bool" value="false"/>
    <param name="publish_pose" type="bool" value="true"/>

    <remap from="~imu" to="/imu/imu"/>
    <remap from="~field" to="/imu/magnetic_field"/>

    <!-- Load filter parameters from galt_setup -->
    <rosparam file="$(find galt_setup)/config/params_3dm_gx4_25_post.yaml"/>
  </node>
</launch>
