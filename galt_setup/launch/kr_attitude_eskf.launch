<!--
  Name: kr_attitude_eskf.launch
  Triggers:
    * kr_attitude_eskf

  Brief: Launches the attitude ESKF.
  Note: Magnetometer calibration must already be saved to rosparam.

  Topics you should record:
    * /attitude_eskf/adjusted_field
    * /attitude_eskf/bias
    * /attitude_eskf/filtered_imu
    * /attitude_eskf/status
-->

<launch>
  <node pkg="kr_attitude_eskf" name="attitude_eskf" type="kr_attitude_eskf" output="screen">

    <!-- Magnetometer calibration needs to be in rosparam already -->
    <param name="enable_magnetometer" type="bool" value="true"/>
    <param name="calibrate_magnetometer" type="string" value="none"/>

    <!-- Enable pose for rviz debugging -->
    <param name="broadcast_frame" type="bool" value="false"/>
    <param name="publish_pose" type="bool" value="true"/>

    <remap from="~imu" to="/imu/imu"/>
    <remap from="~field" to="/imu/magnetic_field"/>

    <!-- Load filter parameters from galt_setup -->
    <rosparam file="$(find galt_setup)/config/params_3dm_gx4_25.yaml"/>
  </node>
</launch>
