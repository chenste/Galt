<launch>

    <arg name="manager" default="stereo_vo"/>
    <arg name="stereo_ns" default="/mv_stereo"/>
    <arg name="disparity" default="false"/>

    <arg name="bagfile_home" value="$(env GALT_BAGFILES)"/>
    <arg name="bagfile" default="day2/fly/2014-07-25-18-14-12.bag"/>

    <arg name="cell_size" default="40"/>
    <arg name="max_corners" default="1"/>
    <arg name="max_level" default="3"/>
    <arg name="win_size" default="11"/>

    <arg name="rviz" default="false"/>

    <node pkg="rosbag" type="play" name="player"
        args="-l $(arg bagfile_home)/$(arg bagfile)">
    </node>

    <node pkg="stereo_image_proc" type="stereo_image_proc"
        name="stereo_image_proc" ns="$(arg stereo_ns)">
    </node>

    <node pkg="stereo_vo" type="stereo_vo_node" name="stereo_vo"
        output="screen" ns="$(arg stereo_ns)">
        <param name="cell_size" value="$(arg cell_size)"/>
        <param name="max_corners" value="$(arg max_corners)"/>
        <param name="max_level" value="$(arg max_level)"/>
        <param name="win_size" value="$(arg win_size)"/>
    </node>

    <node if="$(arg disparity)"
        pkg="image_view" type="stereo_view" name="stereo_view"
        args="stereo:=$(arg stereo_ns) image:=image_rect">
    </node>

    <node if="$(arg rviz)"
      name="rviz_stereo" pkg="rviz" type="rviz"
      args="--display-config $(find stereo_vo)/rviz/config.rviz">
    </node>

</launch>
