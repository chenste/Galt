<launch>

    <arg name="manager" default="stereo_vo"/>
    <arg name="stereo_ns" default="/mv_stereo"/>
    <arg name="disparity" default="false"/>

    <arg name="bagfile_home" value="$(env GALT_BAGFILES)"/>
    <arg name="bagfile" default="day2/fly/2014-07-25-18-14-12.bag"/>

    <arg name="num_features" default="100"/>
    <arg name="min_features" default="50"/>
    <arg name="max_level" default="3"/>
    <arg name="win_size" default="11"/>

    <node pkg="rosbag" type="play" name="player"
        args="-l $(arg bagfile_home)/$(arg bagfile)">
    </node>

    <node pkg="stereo_image_proc" type="stereo_image_proc"
        name="stereo_image_proc" ns="$(arg stereo_ns)">
    </node>

    <node pkg="stereo_vo" type="stereo_vo_node" name="stereo_vo"
        output="screen" ns="$(arg stereo_ns)">
        <param name="num_features" value="$(arg num_features)"/>
        <param name="min_features" value="$(arg min_features)"/>
        <param name="max_level" value="$(arg max_level)"/>
        <param name="win_size" value="$(arg win_size)"/>
    </node>

    <node if="$(arg disparity)"
        pkg="image_view" type="stereo_view" name="stereo_view"
        args="stereo:=$(arg stereo_ns) image:=image_rect">
    </node>

</launch>
